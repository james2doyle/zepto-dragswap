/*! dragswap by James Doyle(@james2doyle) http://ohdoylerules.com MIT */
;(function($){$.fn.dragswap=function(options){var dragSrcEl;function getPrefix(){var el=document.createElement("p"),getPre,transforms={webkitAnimation:"-webkit-animation",OAnimation:"-o-animation",msAnimation:"-ms-animation",MozAnimation:"-moz-animation",animation:"animation"};document.body.insertBefore(el,null);for(var t in transforms){if(el.style[t]!==undefined){el.style[t]="translate3d(1px,1px,1px)";getPre=window.getComputedStyle(el).getPropertyValue(transforms[t]);return t}}document.body.removeChild(el)}this.defaultOptions={element:"li",overClass:"over",moveClass:"moving",dropClass:"drop",dropAnimation:false,exclude:".disabled",prefix:getPrefix(),dropComplete:function(){return}};function onAnimEnd(elem){var $elem=$(elem);$elem.addClass(settings.dropClass);$elem.on(settings.prefix+"End",function(){$elem.removeClass(settings.dropClass)},false)}function handleDragStart(e){$(this).addClass("moving");dragSrcEl=this;e.dataTransfer.effectAllowed="move";e.dataTransfer.setData("text/html",this.innerHTML)}function handleDragEnter(e){$(this).addClass(settings.overClass)}function handleDragLeave(e){$(this).removeClass(settings.overClass)}function handleDragOver(e){if(e.preventDefault){e.preventDefault()}e.dataTransfer.dropEffect="move";return false}function handleDrop(e){if(e.stopPropagation){e.stopPropagation()}if(dragSrcEl!=this){var oldEl={html:this.innerHTML,id:this.id};var newEl={html:dragSrcEl.innerHTML,id:dragSrcEl.id};dragSrcEl.innerHTML=oldEl.html;dragSrcEl.id=oldEl.id;this.innerHTML=newEl.html;this.id=newEl.id;if(settings.dropAnimation){onAnimEnd(this);onAnimEnd(dragSrcEl)}settings.dropComplete()}return false}var settings=$.extend({},this.defaultOptions,options);var method=String(options);var items=[];if(/^(toArray|toJSON)$/.test(method)){if(method=="toArray"){$(this).find(settings.element).each(function(index,elem){items.push(this.id)});return items}else if(method=="toJSON"){$(this).find(settings.element).each(function(index,elem){items[index]={id:this.id}});return JSON.stringify(items)}return}return this.each(function(index,item){var $this=$(this);var $elem=$this.find(settings.element).filter(":not("+settings.exclude+")");function handleDragEnd(e){$this.removeClass(settings.dropClass);$elem.each(function(index,item){$(this).removeClass(settings.overClass)})}$elem.filter(":not("+settings.exclude+")").attr("draggable",true);$elem.on("dragstart",handleDragStart);$elem.on("dragenter",handleDragEnter);$elem.on("dragover",handleDragOver);$elem.on("dragleave",handleDragLeave);$elem.on("drop",handleDrop);$elem.on("dragend",handleDragEnd)})}})(Zepto);